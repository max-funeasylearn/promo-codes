System.register(["angular2/core","angular2/http","rxjs/add/operator/map","./vars"],function(t,e){"use strict";var r,s,o,n,i=(e&&e.id,this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),a=this&&this.__decorate||function(t,e,r,s){var o,n=arguments.length,i=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,s);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(n<3?o(i):n>3?o(e,r,i):o(e,r))||i);return n>3&&i&&Object.defineProperty(e,r,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};return{setters:[function(t){r=t},function(t){s=t},function(t){},function(t){o=t}],execute:function(){n=function(t){function e(e){this.error="",this.message="",this.info="",this.users=[],this.http=e,t.call(this)}return i(e,t),e.prototype.showForm=function(t,e){$("main-container").hide(),$("main-container#user_form").show(),void 0!==e?($("#user_form_title").text("Edit User"),$("#user_id").val(e.user_id),$("#username").val(e.username),$("#user_type").val(e.user_type),$("#password").val(e.password),$("#firstname").val(e.firstname),$("#lastname").val(e.lastname),$("#status").attr("checked",1==e.status).prop("checked",1==e.status),document.querySelector("#status").dispatchEvent(new Event("change")),$("#promocodes_limit").val(e.promocodes_limit)):($("#user_form_title").text("New User"),$("#user_id").val(0),$("#username").val(""),$("#user_type").val("moderator"),$("#password").val(""),$("#firstname").val(""),$("#lastname").val(""),$("#status").attr("checked",!0),$("#promocodes_limit").val(0),$("#user_form_title").text("New User")),document.querySelector("form#user_form").dispatchEvent(new Event("display"))},e.prototype.delete=function(t){var e=this;if(!confirm("Are you sure?"))return!1;this.http.post("/users/delete",JSON.stringify({user_ids:t}),{headers:{"Content-Type":"application/json"}}).map(function(t){return t.json()}).subscribe(function(t){return e.deleteCallback(t)})},e.prototype.get=function(){var t=this;this.http.get("/users",{headers:{"X-Requested-With":"XMLHttpRequest"}}).map(function(t){return t.json()}).subscribe(function(e){return t.getCallback(e)})},e.prototype.onDisplay=function(){this.message="",this.error="",this.info="",this.get()},e.prototype.getCallback=function(t){void 0===t.error?(this.users=t,0==this.users.length?this.info="Empty result":this.info=""):(this.users=[],this.error=t.error)},e.prototype.deleteCallback=function(t){void 0===t.error?(this.message="User successfully deleted",this.get()):this.error=t.error},e=a([r.Component({selector:"main-container#users",viewProviders:[s.HTTP_PROVIDERS],templateUrl:"partials/users.html"}),u("design:paramtypes",[s.Http])],e)}(o.Vars),t("UsersComponent",n)}}});