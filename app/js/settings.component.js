System.register(["angular2/core","angular2/http","./vars"],function(t,e){"use strict";var s,n,i,r,o=(e&&e.id,this&&this.__extends||function(t,e){function s(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(s.prototype=e.prototype,new s)}),a=this&&this.__decorate||function(t,e,s,n){var i,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,s):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(r<3?i(o):r>3?i(e,s,o):i(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};return{setters:[function(t){s=t},function(t){n=t},function(t){i=t}],execute:function(){r=function(t){function e(e){this.form_title="Settings",this.error="",this.message="",this.settings=[],this.http=e,t.call(this)}return o(e,t),e.prototype.get=function(){var t=this;this.http.get("/settings").map(function(t){return t.json()}).subscribe(function(e){return t.getCallback(e)})},e.prototype.onDisplay=function(){this.get(),this.message="",this.error=""},e.prototype.save=function(t){var e=this,s=this;$("#settings_form #fields input").each(function(t){s.settings[t].value=$(this).val()}),this.http.post("/settings/save",JSON.stringify(this.settings),{headers:{"Content-Type":"application/json"}}).map(function(t){return t.json()}).subscribe(function(t){return e.saveCallback(t)})},e.prototype.getCallback=function(t){this.settings=t,$("form#settings_form #fields").empty();for(var e in this.settings)$("form#settings_form #fields").append('      <div class="form-group">              <label for="setting'+e+'">'+this.settings[e].name+'</label>              <input type="text" class="form-control" id="setting'+e+'" [(ngModel)]="settings['+e+'].value" value="'+this.settings[e].value+'" required>            </div>')},e.prototype.saveCallback=function(t){this.message="",this.error="",void 0===t.error?this.message="Settings successfully updated":this.error=t.error,this.get()},e=a([s.Component({selector:"main-container#settings",viewProviders:[n.HTTP_PROVIDERS],templateUrl:"partials/settings.html"}),c("design:paramtypes",[n.Http])],e)}(i.Vars),t("SettingsComponent",r)}}});